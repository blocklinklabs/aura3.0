type ConsentUpdated @entity(immutable: true) {
  id: Bytes!
  user: Bytes! # address
  consentType: String! # string
  value: Boolean! # bool
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type InterventionLogged @entity(immutable: true) {
  id: Bytes!
  user: Bytes! # address
  interventionType: String! # string
  outcome: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UserConsent @entity {
  id: Bytes! # user address
  aiInterventions: Boolean!
  emergencyContact: Boolean!
  dataSharing: Boolean!
  lastUpdated: BigInt!
  auditLogs: [AuditLog!]! @derivedFrom(field: "user")
}

type AuditLog @entity {
  id: Bytes!
  user: UserConsent!
  interventionType: String!
  timestamp: BigInt!
  outcome: String!
}
